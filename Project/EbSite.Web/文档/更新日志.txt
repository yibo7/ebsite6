 
ebsite5.5 更新日志:

1.内容表的自增ID修改为 long 类型

2..net 框架升级为 4.5 

3.支持mvc 5的路由扩展

4.支持 mvc 模块扩展

5.加入log4net日志组件，可以在二次开发时直接调用此组件

6.一般处理程序不再在web.config里配置，统一由mvc路由接管

7.专题加入专题介绍

8.加强SEO可订制化，在重写或自动静态模式下,分类里可以定制某个分类的访问URL,并且可以针对这个分类下的内容设置URL

9.加强SEO可订制化，分类，内容，专题不但可以像之前那样修改重写后缀，还可以改变参数之间的连接字符，注意不能改变参数的顺序

10.加强SEO可订制化，和分类一样，也可以单独订制某个内容的URL(未完成,放弃，原因，1.内容订单过多会造成加载过慢;2.最主要的问题是内容页处理过于麻烦，因为内容支持分页)

11.用户表添加LoginCount用于前台统计登录次数，字段默认值是

12.修复在站群之间切换，分类无法按模型调用列表（之前调用了所有分类,注册各个站群下的模型ID不能相同哦）

13.修复首页定时生成乱码

14.修复后台编辑器不能上传图片

15.修复分类seo自定义设置不起作用的问题

16.加入文章采集接口

17.修复在url自定义重写目录的情况下列表分页bug

18.增加默认部件模板代码高亮功能

19.修复发布文章时缩略图没有上传成功

20.修复 count 下的 eb_goods_visite 数据统计功能

21.后台添加在线用户,去掉cnzz统计

22.标签部件支持内容自动适应

23.Host下添加获取内容简介方法

24.App_Code/Common下添加列表标签输出方法 TagHtml,TagHtmlForTagv

25.添加动态组件，关键词预定链  ReplaceOnShowInfo

26.升级了codemirror组件，之前一直有bug,性能不好，升级后性能良好

27.后台的系统配置里添加了移动设置访问PC页面自动定向到移动页面的选项

28.支持复制一份网站将其设置为独立的手机站（1.在PC站设置启用站外独立移动站;2.在移动站设置：开启独立移动站）

29.严格PC版地址重写规则，之前只要符合规则就可以访问，如在在规则前加入一些目录，一样可以访问，现在将会是404

30.增加公共文件模板编辑代码高亮功能

31.修复分类与专题自动适应移动URL,已经支持分页的url适应

32.修复专题内容可以重复添加的BUG

33.增加模板编辑器代码高亮功能

34.增加样式编辑器代码高亮功能

35.加入Quartz.NET,你可以实现自己的jobs放到bin下，然后在Quartz的配置里设置计划执行规则,可以在EbSite.Jobs里添加计划工作

36.修复群发邮件重复接收到多份邮件的bug

37.删除EbSite.Core.Log,在AppStartInit下添加ErrorLogger,InfoLogger,EmailLogger 三种日志对象，重新配置log4.config

38.部件支持远程调用：可以远程输出指定部件id的html或由html转换的js
 

39.远程输出指定部件id的html或由html转换的js添加缓存

40.首页定时生成，立即生成有时不成功的bug

41.分页控件加上属性 IsNoFollow 可以设置是否让分页链接变成 nofollow

42.在后台分类及内容管理列表添加了一个列叫源页，其实就是原始的动态页面地址，方便检查内容的实时性

43.专题添加内容列表中，排除已经添加在此专题的内容

44.修复调用GetContent部件，调用条数无效的bug

45.修复分类配置的相关问题,如当站有多个分类模型时，添加分类总是在第一个模型

46.部件列表可以查看jsapi,txtapi

47.随机内容部件GetRelatedContent重写，优化随机查询速度，加入随机缓存时间

48.加功能，随机内容部件GetRelatedContent不能随机出与当前内容一样的记录

50.部件模板编辑加入代码高亮控件（包括默认模板,后台内容列表）

50.升级了Core.ClearHtml方法，增加去除style,screipt等

51.下一篇到最后不能调用下当前相同的文章

52.增加部件模板编辑代码高亮功能

53.编辑部件时可以创建模板，创建完成后返回编辑，并归属于此部件，同时可以在编辑部件页面编辑当前部件模板

54.删除classconfig里的classid,isdefault(站点ID>0视为当前站点默认),增加表classsetconfig

55.添加计划任务审核任务

56.修复在审核列表修改文章的bug

57.在审核文章列表里添加发布人，文章发布时间

58.修复标签结果页分页，返回首页404

59.添加webapi(EbSite.Mvc.Controllers)，提供内容表的添加，修改，查询，具体使用方法查看单元测试项目

60.添加日志组件，使用注入方式，方法在需要的项目中的引用

61.对未审核文章也可以查看的支持

62.修复bug,未审核文章删除错误，列表分类里无法载入分类

63.由于在启用动态js,css时导致加载过慢，所以优化启用动态js时将原来的动态js输出更改为静态方式，生成一个指定路径下的合并压缩js文件，不再直接引用动态js
   (已经有新的解决方法，通过开启：是否缓存JS与CSS可以解决动态混合压缩js,css时加载过慢的问题)

64.日志（404,硬盘缓存）写入错误追踪信息

65.新加自定义报表功能，可以定义默认报表数据及查询表单，可以到Datastore/ReportConfigs下复制一份json文件，添加一个报表，完成后记得要重新生成报表菜单

66.添加了报表权限与菜单

67.添加了模型控件，如有升级需求，也要升级模板控制数据

68.新加自定义报表功能增加图表支持(曲线，柱状图，饼图)

69.移动站要的自动静态配置与PC共用，之前移动站下无法设置为自动静态，现在可以，但与PC共用（如果移动站与PC站在同一个站点下的话，如果分开就是各自独立，建议分开两个站点）
 
70.不存在的内容Id返回404并写入日志

71.未审核的内容，非管理员访问页面，返回404并写入日志

72.移动版下的前端页面不要输出百度适配标签

72.标签结果页面数据按文章的最新排序

73.标签列表与标签结果页支持自动静态(PC与移动版)

74.解决静态页面.htm,html的Gzip压缩在google浏览器或360极速浏览器下直接显示源码的问题

75.删除cnzz相关的配置与调用，如有需要请到模板的公共文件里添加

76.删除了与系统新版本检测与自动升级功能，如有需要，请到官网下载手动升级

77.修复，/ajaxget/下不存在的页面会发生错误，修复后不存在的接管将返回404

78.修复jscss.ashx输出的js安全问题，由原来的目录参数改在站点Id

79.搜索插件添加了分词接口,并且在实现操作里加入了盘古分词的实现

80.后台搜索管理里可以测试分词

81.添加动态组件，添加内容时根据标题分词添加标签

82.添加动态组件，内容展示时根据内容分词，替换与其一至的关键词链接到标签

83.添加动态组件，内容展示时根据内容分词，替换与其一至的关键词链接到专题

84.编辑器添加图片搜索

85.增加JOB插件，定时将内容添加到专题(目前根据专题里的关键词去匹配内容表里的标题与内容，内容中存在关键词的次数大于等于3)

86.内容表添加字段Keywords,Description

87.编辑器增加插入分页符

88.内容模板添加嵌入式评论绑定(有利于SEO)

89.修复编辑器在内容编辑时，放大宽度会错乱的bug

90.完善无限级回复评论系统及后台管理评论的相关调整与功能加强

91.增加部件SpecialContent应用于专题模板，调用专题下的内容，排序：最新，最老，访问最多,今日访问最多，本周访问最多，本月访问最多，评论最多，收藏最多,随机;数据类型：全部，推荐，有标签，有图片

92.增加部件JsonList,与NewRss部件一样能获取外部站点数据，能在Repeater里绑定外部json数据列表，但这个部件的json里的数据类型随意，只要是列表类型，如C#下 List<object> 类型，在制作模板时，视外部提供的object属性而定，所以些此部件比较活

93.缩略图上传重构，可以通过内容实体调用 BaseImg(与缩略图对应的原图)，BigImg(与缩略图对应的大图)，MiddleImg(与缩略图对应的中图)

94.添加动态组件ContentDescription,在内容添加时如果内容简介为空，会自动获取内容简介

95.给部件添加了Pram属性，可以在调用部件模板时动态传入参数，具体请参考JsonList部件

96.升级SpecialDh部件，增加查询指定数据类型与排序功能

97.xhEditor编辑器插入分页符支持当前描点定位

98.修正在虚拟目录(子应用程序)  下的路径问题(地址重写规则，后台模板，部件控件,模块配置等路径)

99.xhEditor编辑器添加了插入定位符的插件，可以配合模板制作添加目录描点

100.文章模板将原来的分页，修改成下一页，上一页模式，不再支持目录（由新加的定位替换，在当前页面描点）

101.文章模板添加了定位目录绑定控件（其实是由原来的分页绑定直接迁移过来的）

102.全面修复上传图片加水印的问题

103.修复上传文件时经常提示无权限的问题（去除用户在线ID的验证）

104.添加动态组件，收集搜索引擎蜘蛛来访数据,用于分析蜘蛛每天来访时间段及习惯

105.xhEditor编辑器增加本地存储与还原

106.增加动态组件，添加文章时，替换同义词,可修改组件同目录下的同义词库SynonymReplace.txt，用*号分开，组件可设置替换词数，替换后是否着色(测试效果时用)

107.增加百度编辑器，UEditor,asp.net 控件与模型控件

108.蜘蛛访问日志记录组件添加记录 Http状态，访问目录，访问域名

109.快捷菜单，不再记录添加用户，全局共享

110.系统设置添加是否自动更新域名(有时要指定固定域名，而不想自动获取)

111.UEditor添加目录定位插件与网络图片搜索插件

112.UEditor上传图片支持缩略图与水印

113.蜘蛛访问日志报表分析模块(爬虫标记，文章明细，访问频次，时段分析)

114.取消后台登录管理与站点Id的关联，每次登录登录进来都为主站点，然后再切换，所以管理员表里的站点ID不再启用

115.修复分类在切换站点后依然能查询到其他站点下的分类问题

116.修复web服务SoapHeader安全验证

117.内容表删除字段ContentTemID,已经不使用此字段

117.升级到5.0兼容MVC后，成功升级修复论坛模块的相关BUG,并将老论坛数据升级到新版

118.修复搜索错误:Unknown column 'ContentTemID' in 'field list' 

119.默认不使用xheditor,前端使用umeditor，ueditor,也不再提供ubb转换(加强前端提交代码的xss代码的过滤)，如有需要，请自行扩展(未)

120.App_Code下的ueditor网络图片搜索api迁移到EbSite.UEditor下集中管理

121.添加HTML5图片上传控件UploadImg(前台文件js/webuploader/下),支持图片qq截图上传

122.在UploadImg基础上增加Html5图片上传模型控件UploadImg,可以在后台应用此控件到三大模型

123.改进webform模块事件扩展，不需要安装的时候在App_Code/Plugins下生成动态组件

124.添加自动静态处理扩展事件OnTemCacheing，在自动静态缓存前可以进行一些业务操作，或阻住进行，集成自己的静态缓存保存方式。

125.添加动态组件TemCacheRedis，可用来将自动静态页面缓存到Redis数据库（默认在硬盘），这样方便管理缓存数据,要使用此功能，除了将动态组件安装外，还要将后台需要缓存的页面类别的链接方式(注意，更改后PC与移动同时启动)，在站点设置里修改成自动静态方才启用。

126.表newscontent添加字段lastupdatetime(最后内容更新时间)，以供二次开发时相应的场景使用,并添加触发器newscontentupdate，用来更新lastupdatetime，默认是分类与内容或者审核状态(IsAuditing)更新时会更新时间

127.添加Lucene定时索引更新jobs(LuceneIndexUpdate),启动Lucene搜索插件后，再也不用手动更新索引了,默认1小时更新一次

128.不再主动生成缩略图，同时也不再提供缩略相关配置，如有需要请使用缩略图动态缓存组件，本次修改涉及到PicConfigs配置,PicConfig.ascx相关页面,
	CrawlerHandler.cs,UploadImgByUrls.cs,UploadHandler.cs,DownRemoteImgBase64.cs,UpSingleFile.cs,HtmlDown.cs

129.添加动态组件ImgCache，动态缓存缩略图，第一次访问自动生成，访问方式*ebbaseimg宽a高.png,如/zqotj2353qv-ebbaseimg300a300.png,可以任意在组件配置后台添加宽高格式，但不指定将不启动用，访问会出现404

130.删除模块默认配置文件继承(Base.Config)，可自由定义配置

131.增加作业调度管理功能,可以添加程序集作业，也支持添加URL作业（默认会给调用地址传递key&tk两个参数值，key是原文，tk是用网站密钥加密后的key值，进行36位md5后的值，接收方可验证安全性）,不再使用之前的手动添加作业配置

132.增加JobApiBase,为URL作业提供安全便捷开发规范，继承此类实现Execute方法可以完成任务程序，重写IsAsyn为true可实现异步调用作业任务

133.模块的前台页面默认不再引用模块下的Css/index.css(如果有需要在相应的页面重写InitStyle方法),但仍会引用js/comm.js或js/mobilecomm.js

134.将后台管理菜单路由页面的母板页调整为三种PagesCustom.master(常规),PagesCustomMini.master（弹出窗口）,PagesModules.master（模块管理页）

135.在后台管理菜单路由基类增加eMasterType属性，子类可重写此属性指定要使用的母板页

136.在控制器基类增加ViewBag.UserId，ViewBag.SiteId，ViewBag.SiteName，ViewBag.UserNiName，ViewBag.IISPath，ViewBag.DomainName;

137.Sql查询语句调试信息输出采用js,可以调试异步后的查询语句,为了不错过执行时间较长的语句，输出结果延迟10秒，这期间不要刷新页面,不调试时要及时关闭此功能以免泄露sql

138.内容模型的自定义字段可以隐藏,只为辅助二次开发中方便操作附加的字段，也样操作内容表也不用写sql了(未)

139.StopwordsReplace防复制采集组件，要添加样式表，参考base.css

140.用户注册支持手机号及手机验证码

141.添加了轻量级上传控件，这是一个方法，可以在winform下使用也可以在mvc个使用，使用方法参考论坛教程

142.添加了文件上传服务中转配置，可以在后台设置是否开启文件服务器及文件服务器的url,默认支持XS.FileServer,也可参考此功能自动开发

143.修复自定义报表在重复查询的时候数据列会不断累加的问题

权限与菜单的对应关系重新整理(未完成) 

添加操作日志类型，修改密码要添加日志，修改角色，权限添加日志，创建部门，控件添加日志，保存配置添加日志，添加用户，删除用户添加日志，合并或移动分类添加日志，
合并或移动分类添加日志,修改模板添加日志（未）

系统升级到5.0后，商城模块bug的修复(未)

系统升级到5.0后，问答模块bug的修复(未) 

 
部件jsapi,txtapi,可以传参数，让异步载入部件数据可以根据当前情况，保持地址参数（未）

专题连接接口添加连接方法 GetSpecialHref(int iID, int Index,int ClassId),可以调用某个专题下某个属于某个分类的内容（未）

严格移动版地址重写规则，之前只要符合规则就可以访问，如在在规则前加入一些目录，一样可以访问，现在将会是404,PC版已经完成(未)
 