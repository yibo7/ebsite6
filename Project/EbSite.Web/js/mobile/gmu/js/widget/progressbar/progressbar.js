(function(b,a,c){b.define("Progressbar",{options:{initValue:0,horizontal:true,transitionDuration:300,_isShow:true,_current:0,_percent:0},_init:function(){var h=this,f,g,i,d,e;h.on("ready",function(){f=h.$el,g=a.proxy(h._eventHandler,h),i=f.find(".ui-progressbar-button"),d=f.find(".ui-progressbar-bg"),e=f.offset();i.on("touchstart touchmove touchend touchcancel",g);d.on("touchstart",g);a.extend(h._options,{_button:i[0],$_background:d,_filled:f.find(".ui-progressbar-filled")[0],_width:e.width,_height:e.height});h._options.horizontal&&e.width&&f.width(e.width);h._options.initValue>0&&h.value(h._options.initValue)});h.on("destroy",function(){if(!h._options.setup){h.$el.remove()}})},_create:function(){var d=this,e=d._options.horizontal?"h":"v";if(!d.$el){d.$el=a("<div></div>")}d.$el.addClass("ui-progressbar-"+e).appendTo(d._options.container||(d.$el.parent().length?"":document.body)).html(('<div class="ui-progressbar-bg"><div class="ui-progressbar-filled"></div><div class="ui-progressbar-button"><div><b></b></div></div></div>'))},_eventHandler:function(f){var d=this;switch(f.type){case"touchmove":d._touchMove(f);break;case"touchstart":a(f.target).hasClass("ui-progressbar-bg")?d._click(f):d._touchStart(f);break;case"touchcancel":case"touchend":d._touchEnd();break;case"tap":d._click(f);break}},_touchStart:function(g){var f=this,d=f._options;a.extend(f._options,{pageX:g.touches[0].pageX,pageY:g.touches[0].pageY,S:false,T:false,X:0,Y:0});d._button.style.webkitTransitionDuration="0ms";d._filled.style.webkitTransitionDuration="0ms";a(d._button).addClass("ui-progressbar-button-pressed");f.trigger("dragStart")},_touchMove:function(i){var h=this,g=h._options,l=i.touches[0],k=l.pageX-g.pageX,j=l.pageY-g.pageY,d;if(!g.T){var f=Math.abs(k)<Math.abs(l.pageY-g.pageY);g.T=true;g.S=f}if(g.horizontal){if(!g.S){i.stopPropagation();i.preventDefault();d=(k+g._current)/g._width*100;if(d<=100&&d>=0){g._percent=d;g.X=k;g._button.style.webkitTransform="translate3d("+(g.X+g._current)+"px,0,0)";g._filled.style.width=d+"%";h.trigger("valueChange")}h.trigger("dragMove")}}else{if(g.S){i.stopPropagation();i.preventDefault();d=-(g._current+j)/g._height*100;if(d<=100&&d>=0){g._percent=d;g.Y=j;g._button.style.webkitTransform="translate3d(0,"+(j+g._current)+"px,0)";g._filled.style.cssText+="height:"+d+"%;top:"+(g._height+j+g._current)+"px";h.trigger("valueChange")}h.trigger("dragMove")}}},_touchEnd:function(){var e=this,d=e._options;d._current+=d.horizontal?d.X:d.Y;a(d._button).removeClass("ui-progressbar-button-pressed");e.trigger("dragEnd")},_click:function(h){var g=this,f=g._options,d=f.$_background.offset(),i=h.touches[0];f.horizontal?g.value((i.pageX-d.left)/f._width*100):g.value((f._height-i.pageY+d.top)/f._height*100)},value:function(g){var f=this,e=f._options,d,h;if(g===c){return e._percent}else{g=parseFloat(g);if(isNaN(g)){return f}g=g>100?100:g<0?0:g;e._percent=g;h=";-webkit-transition-duration:"+e.transitionDuration+"ms";if(e.horizontal){d=e._current=e._width*g/100;e._button.style.cssText+="-webkit-transform:translate3d("+d+"px,0,0)"+h;e._filled.style.cssText+="width:"+g+"%"+h}else{d=e._current=e._height*g/-100;e._button.style.cssText+="-webkit-transform:translate3d(0,"+d+"px,0)"+h;e._filled.style.cssText+="height:"+g+"%;top:"+(e._height+d)+"px"+h}f.trigger("valueChange");return f}},show:function(){var d=this;if(!d._options._isShow){d.$el.css("display","block");d._options._isShow=true}return d},hide:function(){var d=this;if(d._options._isShow){d.$el.css("display","none");d._options._isShow=false}return d}})})(gmu,gmu.$);