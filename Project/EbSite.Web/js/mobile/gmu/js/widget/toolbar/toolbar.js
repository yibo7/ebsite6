(function(b,a){b.define("Toolbar",{options:{container:document.body,title:"\u6807\u9898",leftBtns:[],rightBtns:[],fixed:false},_init:function(){var e=this,d=e._options,c;if(!d.container){d.container=document.body}e.on("ready",function(){c=e.$el;if(d.fixed){var i=a('<div class="ui-toolbar-placeholder"></div>').height(c.offset().height).insertBefore(c).append(c).append(c.clone().css({"z-index":1,position:"absolute",top:0})),h=c.offset().top,f=function(){document.body.scrollTop>h?c.css({position:"fixed",top:0}):c.css("position","absolute")},g;a(window).on("touchmove touchend touchcancel scroll scrollStop",f);a(document).on("touchend touchcancel",g=function(){setTimeout(function(){f()},200)});e.on("destroy",function(){a(window).off("touchmove touchend touchcancel scroll scrollStop",f);a(document).off("touchend touchcancel",g);c.insertBefore(i);i.remove();e._removeDom()});f()}});e.on("destroy",function(){e._removeDom()})},_create:function(){var g=this,c=g._options,k=g.getEl(),d=a(c.container),e=[],h=g.btnGroups={left:[],right:[]},j=h.left;if(!c.setup){(k&&k.length>0)?k.appendTo(d):(k=g.$el=a("<div>").appendTo(d))}e=k.children();$toolbarWrap=k.find(".ui-toolbar-wrap");if($toolbarWrap.length===0){$toolbarWrap=a('<div class="ui-toolbar-wrap"></div>').appendTo(k)}else{e=$toolbarWrap.children()}e.forEach(function(l){$toolbarWrap.append(l);/^[hH]/.test(l.tagName)?(j=h.right,g.title=l):j.push(l)});var i=$toolbarWrap.find(".ui-toolbar-left");var f=$toolbarWrap.find(".ui-toolbar-right");if(i.length===0){i=e.length?a('<div class="ui-toolbar-left">').insertBefore(e[0]):a('<div class="ui-toolbar-left">').appendTo($toolbarWrap);h.left.forEach(function(l){a(l).addClass("ui-toolbar-button");i.append(l)});f=a('<div class="ui-toolbar-right">').appendTo($toolbarWrap);h.right.forEach(function(l){a(l).addClass("ui-toolbar-button");f.append(l)})}k.addClass("ui-toolbar");a(g.title).length?a(g.title).addClass("ui-toolbar-title"):a('<h1 class="ui-toolbar-title">'+c.title+"</h1>").insertAfter(i);g.btnContainer={left:i,right:f};g.addBtns("left",c.leftBtns);g.addBtns("right",c.rightBtns)},_addBtn:function(c,d){var e=this;a(d).appendTo(c).addClass("ui-toolbar-button")},addBtns:function(c,f){var e=this,d=e.btnContainer[c],g=Object.prototype.toString;if(g.call(c)!="[object String]"){f=c;d=e.btnContainer.right}f.forEach(function(i,h){if(i instanceof b.Base){i=i.getEl()}e._addBtn(d,i)});return e},show:function(){var c=this;c.$el.show();c.trigger("show");c.isShowing=true;return c},hide:function(){var c=this;c.$el.hide();c.trigger("hide");c.isShowing=false;return c},toggle:function(){var c=this;c.isShowing===false?c.show():c.hide();return c},_removeDom:function(){var d=this,c=d.$el;if(d._options.setup===false){c.remove()}else{c.css("position","static").css("top","auto")}}})})(gmu,gmu.$);